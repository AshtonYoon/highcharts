<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/dashboards/datagrid.js"></script>
<script src="https://code.highcharts.com/dashboards/dashboards.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/maps/modules/map.js"></script>
<script src="https://code.highcharts.com/maps/modules/tiledwebmap.js"></script>
<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>

<link rel="shortcut icon"
	href="https://wp-assets.highcharts.com/www-highcharts-com/blog/wp-content/uploads/2021/05/19085042/favicon-1.ico">

<!-- Dashboards container -->
<div id="container">
	<div class="row">
		<div class="cell" id="connect-bar">
			<h1>Sognekraft</h1>
			<div id="connect-switch">
				<input id="connect-toggle" type="checkbox" accesskey="k" onclick="onConnectClicked()"></input>
				<label for="connect-toggle"></label>
			</div>
                <!-- Dialog for entering credentials, usually hidden -->
                <div id="auth-dialog">
                    <div id="auth-content">
                        <label for="username" id="user-label"></label>
                        <input type="text" id="username" name="username" />
                        <label for="pass" id="pass-label"></label>
                        <input type="password" id="password" name="password" minlength="8" required />
                        <input id="auth-submit" type="submit"/>
                        <span id="auth-close">&times;</span>
                    </div>
                </div>
			<div id="dropdown-container">
                    <button onclick="onStationSelectClicked()" id="dropdown-button"></button>
				<div id="dropdownContent" class="dropdown-content">
                        <!-- Populated dynamically, e.g 
						<a class="dropdown-select" href="#">Leikanger</a>
					-->
				</div>
			</div>
			<span id="connect-status"></span>
			<h1>Highcharts</h1>
		</div>
	</div>
    <!-- Two rows for the power plant, up to 2 generators -->
	<div class="row el-aggr">
		<div class="cell el-kpi" id="kpi-agg-1"></div>
		<div class="cell el-chart" id="chart-agg-1"></div>
		<div class="cell data-grid" id="data-grid-1"></div>
	</div>
	<div class="row el-aggr">
		<div class="cell el-kpi" id="kpi-agg-2"></div>
		<div class="cell el-chart" id="chart-agg-2"></div>
		<div class="cell data-grid" id="data-grid-2"></div>
	</div>
        <!-- Row for information and map -->
	<div class="row el-info">
		<div class="cell" id="el-info"></div>
		<div class="cell" id="el-map"></div>
	</div>
</div>

    <div class="highcharts-description">
        <p>
            This application displays key data from a selection of power generation plants in the area of Sogn,
            Norway.
            The charts, KPIs and tables display the generated power in units of MW (Megawatts).
        </p>
        <p>
            How to use:
        <ul>
            <li>Click <b>Connect</b> to connect to Sognekraft's MQTT server.</li>
            <li>When connecting succeeds a selection of power plants becomes available in the <b>Power Station</b>
                dropdown.
            </li>
            <li>Select any of the power stations to start displaying data. The reporting interval is determined by
                the server but will normally be every five minutes.
            </li>
            <li>The application only displays one power station simultaneously</li>
            <li>Another station can be selected without disconnecting from the server.
            </li>
        </ul>
        </p>
    </div>

