<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/dashboards/datagrid.js"></script>
<script src="https://code.highcharts.com/dashboards/dashboards.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/maps/modules/map.js"></script>
<script src="https://code.highcharts.com/maps/modules/tiledwebmap.js"></script>
<script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<!-- MQTT client library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/paho-mqtt.js"
    integrity="sha384-Ljvyu+Te8lhYTZmOKkTuUHeKBt1i/g8TBMb1lDHfgOlI3c0ZTKEN9KVPBM/priIP"
    crossorigin="anonymous"></script>

<!-- Dashboards container -->
<div id="container">
    <!-- Top row, control and status bar -->
    <div class="row">
        <div class="cell" id="connect-bar">
            <h1 id="logo-text">Sognekraft</h1>
            <!--
            <img id="logo-img-1" src="https://assets.highcharts.com/demos/samples/graphics/dashboards/mqtt/sognekraft_logo.png">
            -->
            <!-- Dropdown for selecting power plant -->
            <div id="dropdown-container">
                <button id="dropdown-button"></button>
                <div id="dropdown-content" class="dropdown-content">
                    <!-- Populated dynamically, e.g 
						<a class="dropdown-select" href="#">Kr√•keelvi</a>
					-->
                </div>
            </div>
            <span id="connect-status">Not connected</span>
            <div id="connect-switch">
                <span>Connect MQTT</span>
                <input id="connect-toggle" type="checkbox"></input>
                <label id="button" for="connect-toggle" title="Connect/disconnect MQTT"></label>
            </div>
    </div>
    </div>
    <!-- Two rows for the power plant, max 2 generators ("aggregat") -->
    <div class="row el-aggr">
        <div class="cell el-kpi" id="kpi-agg-1"></div>
        <div class="cell el-chart" id="chart-agg-1"></div>
        <div class="cell data-grid" id="data-grid-1"></div>
    </div>
    <div class="row el-aggr">
        <div class="cell el-kpi" id="kpi-agg-2"></div>
        <div class="cell el-chart" id="chart-agg-2"></div>
        <div class="cell data-grid" id="data-grid-2"></div>
    </div>
    <!-- Bottom row: information (HTML) and Highcharts map -->
    <div class="row el-info">
        <div class="cell" id="el-info"></div>
        <div class="cell" id="el-map"></div>
    </div>
</div>

<div class="highcharts-description">
    <p>
        This application displays key data from a selection of power generation plants in the county of Vestland,
        Norway. The data set contains information about the power plant, and also of water intakes and
        water reservoirs (providing these exist). The data are provided by <b>Sognekraft</b>.
    </p>
    <p>How to use</p>
    <ul>
        <li>Click the switch in the top bar to connect to <b>Sognekraft</b>'s MQTT server.</li>
        <li>When connecting succeeds, a selection of power plants becomes available in the <b>Power Plant</b>
            dropdown.</li>
        <li>Select any of the power plants. This subscribes to the MQTT subjected that are particular to each
            power plant. The reporting interval is determined by the server but will normally be every two
            minutes.
        </li>
        <li>The application only displays data for one power plant at a time.</li>
    </ul>
</div>